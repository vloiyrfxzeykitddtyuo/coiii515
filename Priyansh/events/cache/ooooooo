module.exports.config = {
  name: "nameChangeNotifier",
  eventType: ["log:user-nickname"],
  version: "0.0.1",
  credits: "𝙋𝙧𝙞𝙮𝙖𝙣𝙨𝙝 𝙍𝙖𝙟𝙥𝙪𝙩",
  description: "Notify when someone changes their nickname"
};

module.exports.run = async function({ api, event, Users, Threads }) {
    var { logMessageData, threadID, author } = event;
    var botID = api.getCurrentUserID();
    
    // تحقق مما إذا كان تغيير الاسم من قبل شخص آخر
    if (logMessageData.participant_id !== botID && logMessageData.nickname) {
        var info = await Users.getData(logMessageData.participant_id);
        
        // إرسال رسالة للإعلام عن تغيير الاسم
        return api.sendMessage({ body: `${info.name} - 𝙃𝙖𝙨 𝘾𝙝𝙖𝙣𝙜𝙚𝙙 𝙩𝙝𝙚𝙞𝙧 𝙣𝙞𝘤𝙠𝙣𝙖𝙢𝙚 𝙩𝙤 "${logMessageData.nickname}"` }, threadID);
    }
}
